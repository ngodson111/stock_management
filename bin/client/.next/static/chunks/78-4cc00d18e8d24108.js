"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{2006:function(e,t,r){r.d(t,{Z:function(){return useForm}});var i=r(7115),l=r(7784),n=r(7294);function useForm(e){let{schema:t,data:r}=e,[a,s]=(0,n.useState)(1),[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)({});(0,n.useEffect)(()=>{r&&c(r)},[r]);let handleValidation=e=>{try{var r;let n=(0,l.Fv)(e,t);if(console.log(n),null===(r=n.errors)||void 0===r?void 0:r.hasError){(0,i.Jc)("Please verify indicated fields"),u(n.errors.error);return}return n.data}catch(e){(0,i.Jc)("Something went wrong with validation")}},g=(0,n.useCallback)(e=>{{let t=e.target.name,r=e.target.type,i=e.target.required,n=(0,l.Hc)(r,e),a=null!=n&&""!==n;c(e=>({...e,[t]:a?n:void 0})),i&&a&&u(e=>({...e,[t]:""}))}},[]);return{state:o,error:d,formKey:a,setState:c,setError:u,setFormKey:s,handleInput:g,handleValidation,handleSubmit:e=>{let t=handleValidation(o);t&&e(t)},resetForm:e=>{c(null!=r?r:{}),u({}),s(e=>e+1),e&&(0,i.Qm)(e)}}}},6078:function(e,t,r){r.r(t),r.d(t,{default:function(){return InsertProduct}});var i=r(5893),l=r(2006),n=r(7115),a=r(5506),s=r(5382),o=r(470),c=r(7945),d=r(3104),u=r(2361),g=r(9091),m=r(8699),p=r(8515),h=r(5152),f=r.n(h),v=r(7294);let x=f()(()=>Promise.all([r.e(326),r.e(911),r.e(315)]).then(r.bind(r,2315)),{loadableGenerated:{webpack:()=>[2315]},ssr:!1}),setupVendorInsertHotkeys=(e,t)=>{p.Z.setScope("productInsert"),Object.entries({"ctrl+esc":e,"ctrl+enter":t}).forEach(e=>{let[t,r]=e;(0,p.Z)(t,"productInsert",(e,t)=>{e.preventDefault(),r()})})};function InsertProduct(e){var t,r;let{onClose:h,theme:f,scope:b}=e,j=(0,a.TL)(),[y,N]=(0,v.useState)(!1),{error:C,state:k,formKey:P,handleInput:Z,handleSubmit:S,resetForm:I}=(0,l.Z)({schema:o.Gu});(0,v.useEffect)(()=>(setupVendorInsertHotkeys(h,()=>N(!0)),()=>{p.Z.deleteScope("productInsert"),b&&p.Z.setScope(b)}),[]);let _=(0,v.useCallback)(()=>{N(e=>!e)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{onClose:h,children:(0,i.jsxs)("div",{className:"product-insert",children:[(0,i.jsx)("h2",{className:"product-insert--heading",children:"Insert Product"}),(0,i.jsx)("div",{className:"product-insert--form",children:(0,i.jsxs)("div",{className:"product-insert--form",children:[(0,i.jsxs)("div",{className:"product-insert--form__left",children:[(0,i.jsx)("h4",{className:"product-insert--heading",children:"Basic Information:"}),(0,i.jsxs)("div",{className:"product-insert--group",children:[(0,i.jsx)(u.Z,{id:"code",isRequired:!0,label:"Product Code",placeholder:"eg. 328434-2873..",name:"code",onChange:Z,defaultValue:k.code,error:C.code,autoFocus:!0}),(0,i.jsx)(u.Z,{id:"rack",label:"Rack Information",placeholder:"eg. A3",name:"rack",onChange:Z,defaultValue:k.rack,error:C.rack})]}),(0,i.jsx)(u.Z,{id:"title",isRequired:!0,label:"Product Name",placeholder:"eg. Dairy Milk 100g..",name:"title",onChange:Z,defaultValue:k.title,error:C.title}),(0,i.jsxs)("div",{className:"product-insert--group",children:[(0,i.jsx)(u.Z,{id:"buyingPrice",isRequired:!0,label:"Buying Price",placeholder:"eg. 1500",name:"buyingPrice",onChange:Z,defaultValue:null===(t=k.buyingPrice)||void 0===t?void 0:t.toString(),error:C.buyingPrice}),(0,i.jsx)(u.Z,{id:"sellingPrice",isRequired:!0,label:"Selling Price",placeholder:"eg. 2000",name:"sellingPrice",onChange:Z,defaultValue:null===(r=k.sellingPrice)||void 0===r?void 0:r.toString(),error:C.sellingPrice})]}),(0,i.jsx)(m.Z,{placeholder:"eg. Chocolate,Bars",label:"Tags",defaultValue:k.tags||void 0,error:C.tags,onChange:Z,id:"tags",name:"tags",joinString:",",instruction:"* Tags are used for searching where it helps in making product search variation."})]}),(0,i.jsxs)("div",{className:"product-insert--form__right",children:[(0,i.jsx)("h4",{className:"product-insert--heading",children:"Description:"}),(0,i.jsx)(x,{id:"description",formatedEditorConfig:{theme:f,readonly:!1,height:300},name:"description",onChange:Z,defaultValue:k.description,error:C.description})]})]})},P),(0,i.jsx)("div",{className:"product-insert--actions",children:(0,i.jsx)(c.Z,{label:"Save",type:"primary",onClick:_,style:{minWidth:"13rem"}})})]})}),y?(0,i.jsx)(d.Z,{cancel:_,confirm:()=>{S(e=>{j((0,s.dN)({data:e,callback:()=>{_(),I(),h(),(0,n.Qm)("Product inserted")}}))})},title:"Confirm Insert",message:"Are you sure you want to add this item to list?"}):null]})}},3232:function(e,t,r){r.d(t,{G5:function(){return stringField},v3:function(){return positiveNumberString}});var i=r(1604);let positiveNumberString=e=>i.z.string().refine(e=>!isNaN(parseFloat(e)),{message:"".concat(e," must be a positive number.")}),stringField=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;return i.z.string({required_error:"".concat(e," is required"),invalid_type_error:"Provide valid type"}).min(t,{message:"".concat(e," is too short")}).refine(e=>!r||e.length<=r,"".concat(e," is too long"))};i.z.string({invalid_type_error:"Provide valid type"}).optional().nullable(),i.z.number({invalid_type_error:"Provide valid type"}).optional().nullable(),i.z.boolean({invalid_type_error:"Provide valid type"}).optional().nullable(),i.z.string().refine(e=>!e||!isNaN(+e),{message:"Field must be a positive integer."}).optional()},470:function(e,t,r){r.d(t,{Gu:function(){return a},xs:function(){return n}});var i=r(1604),l=r(3232);let n=i.z.object({id:(0,l.G5)("ID"),code:(0,l.G5)("Code"),title:(0,l.G5)("Title"),buyingPrice:(0,l.v3)("Buying Price"),sellingPrice:(0,l.v3)("Selling Price"),description:(0,l.G5)("Description").optional().nullable(),tags:(0,l.G5)("Tags").optional().nullable(),rack:(0,l.G5)("Rack").optional().nullable(),quantity:(0,l.v3)("Quantity"),inserted:(0,l.G5)("Inserted"),updated:(0,l.G5)("Updated")}),a=n.omit({id:!0,inserted:!0,updated:!0,quantity:!0});n.pick({id:!0})},3104:function(e,t,r){r.d(t,{Z:function(){return UIDialogBox}});var i=r(5893),l=r(5506),n=r(7945),a=r(9091),s=r(8515),o=r(7294);let setupDialogueHotKeys=(e,t)=>{s.Z.setScope("dialogue"),Object.entries({"ctrl+enter":e,"ctrl+esc":t}).forEach(e=>{let[t,r]=e;(0,s.Z)(t,"dialogue",(e,t)=>{console.log(e),e.preventDefault(),r()})})};function UIDialogBox(e){let{cancel:t,confirm:r,message:c,title:d,cancelName:u,confirmName:g,scope:m}=e;return(0,l.TL)(),(0,l.CG)(e=>e.system),(0,o.useEffect)(()=>(setupDialogueHotKeys(r,t),()=>{s.Z.deleteScope("dialogue"),m&&s.Z.setScope(m)}),[]),(0,i.jsx)(a.Z,{onClose:t,showAnimation:!0,children:(0,i.jsxs)("div",{className:"dialogbox",children:[(0,i.jsx)("h2",{className:"dialogbox-heading",children:d}),(0,i.jsx)("p",{className:"dialogbox-message",children:c}),(0,i.jsxs)("div",{className:"dialogbox-actions",children:[(0,i.jsx)(n.Z,{label:null!=g?g:"Confirm",type:"primary",className:"dialogbox-actions--btn",onClick:r}),(0,i.jsx)(n.Z,{label:null!=u?u:"Cancel",type:"error",className:"dialogbox-actions--btn cancel duotone",onClick:t})]})]})})}},9091:function(e,t,r){r.d(t,{Z:function(){return UIModal}});var i=r(5893),l=r(7294);function UIModal(e){let{children:t,onClose:r,style:n,showAnimation:a}=e,s=(0,l.useRef)(null);return(0,i.jsxs)("div",{className:"uimodal",children:[(0,i.jsx)("div",{className:"uimodal-overlay"}),(0,i.jsxs)("div",{className:"uimodal-content",style:n,ref:s,children:[(0,i.jsx)("div",{className:"uimodal-content--cross",onClick:()=>{var e;if(!a)return null==r?void 0:r();null===(e=s.current)||void 0===e||e.classList.add("hide"),setTimeout(()=>null==r?void 0:r(),700)},children:(0,i.jsx)("i",{className:"fa-regular fa-times"})}),t]})]})}},8699:function(e,t,r){r.d(t,{Z:function(){return UITagEditor}});var i=r(5893),l=r(7294);function UITagEditor(e){let{id:t,error:r,isRequired:n,label:a,name:s,placeholder:o,style:c,defaultValue:d,onChange:u,instruction:g,joinString:m}=e,[p,h]=(0,l.useState)(d?"string"==typeof d?d.split(null!=m?m:","):d:[]),[f,v]=(0,l.useState)(""),handleRemoveItemFromState=e=>{let t=p.filter((t,r)=>r!==e);h(t),x(t)},x=(0,l.useCallback)(e=>{null==u||u({target:{value:m?e.join(m):e,name:null!=s?s:"TagEditor",required:null!=n&&n,type:"string"==typeof d?"text":"list"}})},[m,s,n,d,u]),b=(0,l.useCallback)(()=>{if(!f)return;let e=[...p,f];h(e),v(""),x(e)},[f]);return(0,i.jsxs)("div",{className:"tageditor",style:c,children:[a?(0,i.jsxs)("label",{htmlFor:t||"",className:"tageditor-label",children:[a," ",n?"*":""]}):null,(0,i.jsxs)("div",{className:"tageditor-wrapper ".concat(r?"error":""),children:[p.map((e,t)=>(0,i.jsxs)("div",{className:"tageditor-wrapper--item",children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("i",{className:"fa-regular fa-times",onClick:()=>handleRemoveItemFromState(t)})]},t)),(0,i.jsx)("input",{type:"text",placeholder:p.length<1?o:"",id:t,name:s,onChange:e=>{v(e.currentTarget.value)},onKeyUp:e=>{let t=e.currentTarget.value.trim();if("Backspace"===e.code&&p.length>0&&0===t.length){let e=p[p.length-1];e&&v(e),h(e=>e.slice(0,-1));return}if("Enter"===e.code&&t.length>0){let e=[...p,t];h(e),v(""),x(e);return}},onBlur:b,value:f})]}),r?(0,i.jsx)("span",{className:"tageditor-error",children:r}):null,g?(0,i.jsx)("p",{className:"tageditor-instruction",children:g}):null]})}}}]);