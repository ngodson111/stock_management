(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{8941:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks/edit",function(){return i(2247)}])},2006:function(e,t,i){"use strict";i.d(t,{Z:function(){return useForm}});var l=i(7115),n=i(7784),r=i(7294);function useForm(e){let{schema:t,data:i}=e,[a,s]=(0,r.useState)(1),[o,c]=(0,r.useState)({}),[d,u]=(0,r.useState)({});(0,r.useEffect)(()=>{i&&c(i)},[i]);let handleValidation=e=>{try{var i;let r=(0,n.Fv)(e,t);if(console.log(r),null===(i=r.errors)||void 0===i?void 0:i.hasError){(0,l.Jc)("Please verify indicated fields"),u(r.errors.error);return}return r.data}catch(e){(0,l.Jc)("Something went wrong with validation")}},g=(0,r.useCallback)(e=>{{let t=e.target.name,i=e.target.type,l=e.target.required,r=(0,n.Hc)(i,e),a=null!=r&&""!==r;c(e=>({...e,[t]:a?r:void 0})),l&&a&&u(e=>({...e,[t]:""}))}},[]);return{state:o,error:d,formKey:a,setState:c,setError:u,setFormKey:s,handleInput:g,handleValidation,handleSubmit:e=>{let t=handleValidation(o);t&&e(t)},resetForm:e=>{c(null!=i?i:{}),u({}),s(e=>e+1),e&&(0,l.Qm)(e)}}}},2247:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return EditProduct}});var l=i(5893),n=i(2006),r=i(7115),a=i(5506),s=i(5382),o=i(470),c=i(7945),d=i(3104),u=i(2361),g=i(9091),m=i(8699),p=i(5152),h=i.n(p),f=i(7294);let v=h()(()=>Promise.all([i.e(326),i.e(911),i.e(315)]).then(i.bind(i,2315)),{loadableGenerated:{webpack:()=>[2315]},ssr:!1});function EditProduct(e){var t,i;let{onClose:p,theme:h,data:x}=e,b=(0,a.TL)(),[j,N]=(0,f.useState)(!1),{error:y,state:C,formKey:k,handleInput:P,handleSubmit:_,resetForm:Z}=(0,n.Z)({schema:o.xs,data:x}),S=(0,f.useCallback)(()=>{N(e=>!e)},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{onClose:p,children:(0,l.jsxs)("div",{className:"product-edit",children:[(0,l.jsx)("h2",{className:"product-edit--heading",children:"Edit Product"}),(0,l.jsx)("div",{className:"product-edit--form",children:(0,l.jsxs)("div",{className:"product-edit--form",children:[(0,l.jsxs)("div",{className:"product-edit--form__left",children:[(0,l.jsx)("h4",{className:"product-edit--heading",children:"Basic Information:"}),(0,l.jsxs)("div",{className:"product-edit--group",children:[(0,l.jsx)(u.Z,{id:"code",isRequired:!0,label:"Product Code",placeholder:"eg. 328434-2873..",name:"code",onChange:P,defaultValue:C.code,error:y.code,autoFocus:!0}),(0,l.jsx)(u.Z,{id:"rack",label:"Rack Information",placeholder:"eg. A3",name:"rack",onChange:P,defaultValue:C.rack,error:y.rack})]}),(0,l.jsx)(u.Z,{id:"title",isRequired:!0,label:"Product Name",placeholder:"eg. Dairy Milk 100g..",name:"title",onChange:P,defaultValue:C.title,error:y.title}),(0,l.jsxs)("div",{className:"product-edit--group",children:[(0,l.jsx)(u.Z,{id:"buyingPrice",isRequired:!0,label:"Buying Price",placeholder:"eg. 1500",name:"buyingPrice",onChange:P,defaultValue:null===(t=C.buyingPrice)||void 0===t?void 0:t.toString(),error:y.buyingPrice}),(0,l.jsx)(u.Z,{id:"sellingPrice",isRequired:!0,label:"Selling Price",placeholder:"eg. 2000",name:"sellingPrice",onChange:P,defaultValue:null===(i=C.sellingPrice)||void 0===i?void 0:i.toString(),error:y.sellingPrice})]}),(0,l.jsx)(m.Z,{placeholder:"eg. Chocolate,Bars",label:"Tags",defaultValue:C.tags||void 0,error:y.tags,onChange:P,id:"tags",name:"tags",joinString:",",instruction:"* Tags are used for searching where it helps in making product search variation."})]}),(0,l.jsxs)("div",{className:"product-edit--form__right",children:[(0,l.jsx)("h4",{className:"product-edit--heading",children:"Description:"}),(0,l.jsx)(v,{id:"description",formatedEditorConfig:{theme:h,readonly:!1,height:300},name:"description",onChange:P,defaultValue:C.description,error:y.description})]})]})},k),(0,l.jsx)("div",{className:"product-edit--actions",children:(0,l.jsx)(c.Z,{label:"Save",type:"primary",onClick:S,style:{minWidth:"13rem"}})})]})}),j?(0,l.jsx)(d.Z,{cancel:S,confirm:()=>{_(e=>{b((0,s.zG)({data:e,callback:()=>{S(),p(),(0,r.Qm)("Product edited")}}))})},title:"Confirm Edit",message:"Are you sure you want to save changes?"}):null]})}},3232:function(e,t,i){"use strict";i.d(t,{G5:function(){return stringField},v3:function(){return positiveNumberString}});var l=i(1604);let positiveNumberString=e=>l.z.string().refine(e=>!isNaN(parseFloat(e)),{message:"".concat(e," must be a positive number.")}),stringField=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;return l.z.string({required_error:"".concat(e," is required"),invalid_type_error:"Provide valid type"}).min(t,{message:"".concat(e," is too short")}).refine(e=>!i||e.length<=i,"".concat(e," is too long"))};l.z.string({invalid_type_error:"Provide valid type"}).optional().nullable(),l.z.number({invalid_type_error:"Provide valid type"}).optional().nullable(),l.z.boolean({invalid_type_error:"Provide valid type"}).optional().nullable(),l.z.string().refine(e=>!e||!isNaN(+e),{message:"Field must be a positive integer."}).optional()},470:function(e,t,i){"use strict";i.d(t,{Gu:function(){return a},xs:function(){return r}});var l=i(1604),n=i(3232);let r=l.z.object({id:(0,n.G5)("ID"),code:(0,n.G5)("Code"),title:(0,n.G5)("Title"),buyingPrice:(0,n.v3)("Buying Price"),sellingPrice:(0,n.v3)("Selling Price"),description:(0,n.G5)("Description").optional().nullable(),tags:(0,n.G5)("Tags").optional().nullable(),rack:(0,n.G5)("Rack").optional().nullable(),quantity:(0,n.v3)("Quantity"),inserted:(0,n.G5)("Inserted"),updated:(0,n.G5)("Updated")}),a=r.omit({id:!0,inserted:!0,updated:!0,quantity:!0});r.pick({id:!0})},7945:function(e,t,i){"use strict";i.d(t,{Z:function(){return UIButton}});var l=i(5893),n=i(1664),r=i.n(n);function UIButton(e){let{href:t,id:i,label:n,onClick:a,style:s,type:o,className:c,target:d}=e;return t?(0,l.jsx)(r(),{id:i,href:t,className:"btn btn-".concat(o||"link"),style:s,target:d,children:n}):(0,l.jsx)("button",{id:i,className:"btn btn-".concat(o||"plain"," ").concat(c||""),style:s,onClick:a,children:n})}},3104:function(e,t,i){"use strict";i.d(t,{Z:function(){return UIDialogBox}});var l=i(5893),n=i(5506),r=i(7945),a=i(9091),s=i(8515),o=i(7294);let setupDialogueHotKeys=(e,t)=>{s.Z.setScope("dialogue"),Object.entries({"ctrl+enter":e,"ctrl+esc":t}).forEach(e=>{let[t,i]=e;(0,s.Z)(t,"dialogue",(e,t)=>{console.log(e),e.preventDefault(),i()})})};function UIDialogBox(e){let{cancel:t,confirm:i,message:c,title:d,cancelName:u,confirmName:g,scope:m}=e;return(0,n.TL)(),(0,n.CG)(e=>e.system),(0,o.useEffect)(()=>(setupDialogueHotKeys(i,t),()=>{s.Z.deleteScope("dialogue"),m&&s.Z.setScope(m)}),[]),(0,l.jsx)(a.Z,{onClose:t,showAnimation:!0,children:(0,l.jsxs)("div",{className:"dialogbox",children:[(0,l.jsx)("h2",{className:"dialogbox-heading",children:d}),(0,l.jsx)("p",{className:"dialogbox-message",children:c}),(0,l.jsxs)("div",{className:"dialogbox-actions",children:[(0,l.jsx)(r.Z,{label:null!=g?g:"Confirm",type:"primary",className:"dialogbox-actions--btn",onClick:i}),(0,l.jsx)(r.Z,{label:null!=u?u:"Cancel",type:"error",className:"dialogbox-actions--btn cancel duotone",onClick:t})]})]})})}},2361:function(e,t,i){"use strict";i.d(t,{Z:function(){return UIInput}});var l=i(5893),n=i(7294);function UIInput(e){let{id:t,label:i,name:r,isRequired:a,placeholder:s,type:o,style:c,onClick:d,onChange:u,onBlur:g,onFocus:m,error:p,defaultValue:h,instruction:f,disabled:v,autoComplete:x,max:b,min:j,autoFocus:N}=e,[y,C]=(0,n.useState)(!1);return(0,l.jsxs)("div",{className:"inputfield",style:c,children:[i?(0,l.jsxs)("label",{htmlFor:t||"",className:"inputfield-label",children:[i," ",a?"*":""]}):null,(0,l.jsx)("input",{type:"password"===o?y?"text":"password":o,id:t,name:r,className:"inputfield-input ".concat(p?"error":""),placeholder:s,onClick:d,onChange:u,onBlur:g,onFocus:m,defaultValue:null!=h?h:"",required:a,disabled:v,autoComplete:null!=x?x:r,min:j,max:b,autoFocus:N}),p?(0,l.jsx)("span",{className:"inputfield-error",children:p}):null,"password"===o?(0,l.jsx)("i",{className:"fa-regular fa-eye".concat(y?"":"-slash"),onClick:()=>C(e=>!e),style:{bottom:i&&!p?"35%":!i&&p?"65%":"50%"}}):null,f?(0,l.jsx)("p",{className:"inputfield-instruction",children:f}):null]})}},9091:function(e,t,i){"use strict";i.d(t,{Z:function(){return UIModal}});var l=i(5893),n=i(7294);function UIModal(e){let{children:t,onClose:i,style:r,showAnimation:a}=e,s=(0,n.useRef)(null);return(0,l.jsxs)("div",{className:"uimodal",children:[(0,l.jsx)("div",{className:"uimodal-overlay"}),(0,l.jsxs)("div",{className:"uimodal-content",style:r,ref:s,children:[(0,l.jsx)("div",{className:"uimodal-content--cross",onClick:()=>{var e;if(!a)return null==i?void 0:i();null===(e=s.current)||void 0===e||e.classList.add("hide"),setTimeout(()=>null==i?void 0:i(),700)},children:(0,l.jsx)("i",{className:"fa-regular fa-times"})}),t]})]})}},8699:function(e,t,i){"use strict";i.d(t,{Z:function(){return UITagEditor}});var l=i(5893),n=i(7294);function UITagEditor(e){let{id:t,error:i,isRequired:r,label:a,name:s,placeholder:o,style:c,defaultValue:d,onChange:u,instruction:g,joinString:m}=e,[p,h]=(0,n.useState)(d?"string"==typeof d?d.split(null!=m?m:","):d:[]),[f,v]=(0,n.useState)(""),handleRemoveItemFromState=e=>{let t=p.filter((t,i)=>i!==e);h(t),x(t)},x=(0,n.useCallback)(e=>{null==u||u({target:{value:m?e.join(m):e,name:null!=s?s:"TagEditor",required:null!=r&&r,type:"string"==typeof d?"text":"list"}})},[m,s,r,d,u]),b=(0,n.useCallback)(()=>{if(!f)return;let e=[...p,f];h(e),v(""),x(e)},[f]);return(0,l.jsxs)("div",{className:"tageditor",style:c,children:[a?(0,l.jsxs)("label",{htmlFor:t||"",className:"tageditor-label",children:[a," ",r?"*":""]}):null,(0,l.jsxs)("div",{className:"tageditor-wrapper ".concat(i?"error":""),children:[p.map((e,t)=>(0,l.jsxs)("div",{className:"tageditor-wrapper--item",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("i",{className:"fa-regular fa-times",onClick:()=>handleRemoveItemFromState(t)})]},t)),(0,l.jsx)("input",{type:"text",placeholder:p.length<1?o:"",id:t,name:s,onChange:e=>{v(e.currentTarget.value)},onKeyUp:e=>{let t=e.currentTarget.value.trim();if("Backspace"===e.code&&p.length>0&&0===t.length){let e=p[p.length-1];e&&v(e),h(e=>e.slice(0,-1));return}if("Enter"===e.code&&t.length>0){let e=[...p,t];h(e),v(""),x(e);return}},onBlur:b,value:f})]}),i?(0,l.jsx)("span",{className:"tageditor-error",children:i}):null,g?(0,l.jsx)("p",{className:"tageditor-instruction",children:g}):null]})}}},function(e){e.O(0,[664,458,774,888,179],function(){return e(e.s=8941)}),_N_E=e.O()}]);