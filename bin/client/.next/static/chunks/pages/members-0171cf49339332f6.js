(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{8003:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return a(1030)}])},1999:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return MemberTable}});var t=a(2322),n=a(6698),l=a(590);let r=[{name:"fullName",display:"Fullname"},{name:"phone",display:"Phone"},{name:"address",display:"Address"},{name:"updated",display:"Updated At"},{name:"history",display:"Account History"},{name:"inserted",display:"Created At"},{name:"actions",display:"Actions"}];function MemberTable(e){let{handleInsert:s,handleDelete:a,handleEdit:i,handleAccountHistory:d,data:c}=e;return(0,t.jsx)(n.Z,{customActions:(0,t.jsx)(l.Z,{label:(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fa-regular fa-plus"})," Create"]}),type:"primary",style:{minWidth:"10rem"},onClick:s}),headings:r,exportSchema:["fullName","address","phone","updated","inserted"],rawData:c.map((e,s)=>({fullName:{value:e.fullName},address:{value:e.address},phone:{value:e.phone},updated:{value:new Date(e.updated).toUTCString()},history:{value:e.id,display:(0,t.jsx)(l.Z,{label:"Open Account",type:"primary",onClick:()=>d(e)})},inserted:{value:new Date(e.inserted).toUTCString()},actions:{value:e.id,display:(0,t.jsxs)("div",{className:"table-content--actions",children:[(0,t.jsx)(l.Z,{label:(0,t.jsx)("i",{className:"fa-regular fa-edit"}),type:"primary",className:"table-content--actions__btn",onClick:()=>i(e)}),(0,t.jsx)(l.Z,{label:(0,t.jsx)("i",{className:"fa-regular fa-trash"}),type:"error",className:"table-content--actions__btn duotone",onClick:()=>a(e)})]})}}))})}},9143:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return EditMember}});var t=a(2322),n=a(566),l=a(9638),r=a(8039),i=a(1064),d=a(7613),c=a(590),m=a(725),o=a(570),u=a(1383),h=a(2784);function EditMember(e){let{onClose:s,data:a}=e,x=(0,r.TL)(),[j,p]=(0,h.useState)(!1),{error:b,state:f,formKey:y,handleInput:N,handleSubmit:v,resetForm:g}=(0,n.Z)({data:a,schema:d.Nw}),C=(0,h.useCallback)(()=>{p(e=>!e)},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{onClose:s,children:(0,t.jsxs)("div",{className:"member-edit",children:[(0,t.jsx)("h2",{className:"member-edit--heading",children:"Edit Member"}),(0,t.jsx)("div",{className:"member-edit--form",children:(0,t.jsxs)("div",{className:"member-edit--form",children:[(0,t.jsx)("h4",{className:"member-edit--heading",children:"Basic Information:"}),(0,t.jsx)(o.Z,{id:"fullName",isRequired:!0,label:"Fullname",placeholder:"eg. Naran Neu..",name:"fullName",onChange:N,defaultValue:f.fullName,error:b.fullName}),(0,t.jsx)(o.Z,{id:"address",isRequired:!0,label:"Address",placeholder:"eg. Kathmandu, Nepal..",name:"address",onChange:N,defaultValue:f.address,error:b.address}),(0,t.jsx)(o.Z,{id:"phone",isRequired:!0,label:"Phone",placeholder:"eg. 98XXXXXX..",name:"phone",disabled:!0,defaultValue:f.phone,instruction:"* Phone number cannot be edited as this is used to identify the member."})]})},y),(0,t.jsx)("div",{className:"member-edit--actions",children:(0,t.jsx)(c.Z,{label:"Save",type:"primary",onClick:C,style:{minWidth:"13rem"}})})]})}),j?(0,t.jsx)(m.Z,{cancel:C,confirm:()=>{v(e=>{x((0,i.Nb)({data:e,callback:()=>{C(),g(),(0,l.Qm)("Member edited")}}))})},title:"Confirm Edit",message:"Are you sure you want to save changes?"}):null]})}},9133:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return SalesHistoryTable}});var t=a(2322),n=a(6698),l=a(2480),r=a(8039),i=a(6623),d=a(590),c=a(1383),m=a(5957);let o=[{name:"date",display:"Date"},{name:"type",display:"Payment Type"},{name:"amount",display:"Amount"},{name:"discount",display:"Discount"},{name:"member",display:"Member Details"},{name:"items",display:"Details"},{name:"entryDate",display:"Entry Date"}];function SalesHistoryTable(e){let{data:s,onClose:a}=e,u=(0,r.TL)(),h=(0,r.CG)(e=>e.sales),handleItems=e=>{e?u((0,i.iz)(e.id)):u((0,l.U7)(null))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{onClose:a,children:(0,t.jsxs)("div",{className:"sales-insert",children:[(0,t.jsx)("h2",{className:"sales-insert--heading",children:"Sales Details"}),(0,t.jsx)(n.Z,{headings:o,exportSchema:["date","type","amount","discount","member","remark","entryDate"],rawData:s.map((e,s)=>{var a,n,l;return{date:{value:new Date(e.date).toUTCString()},type:{value:e.type},amount:{value:"Rs."+e.amount},discount:{value:"Rs."+e.discount},items:{value:e.id,display:(0,t.jsx)(d.Z,{label:"View Items",type:"primary",onClick:()=>handleItems(e)})},member:{value:null!==(n=null===(a=e.member)||void 0===a?void 0:a.fullName)&&void 0!==n?n:"N/A"},remark:{value:null!==(l=e.remark)&&void 0!==l?l:"N/A"},entryDate:{value:new Date(e.inserted).toUTCString()}}})}),(0,t.jsx)("br",{}),(0,t.jsx)("table",{className:"product-stock--grid",width:"40%",children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Summery:"}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Total Transactions"}),(0,t.jsx)("td",{children:s.length})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Sub Total"}),(0,t.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+ +s.amount,0)]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Total Discount"}),(0,t.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+ +s.discount,0)]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Total Amount"}),(0,t.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+(+s.amount-+s.discount),0)]})]})]})})]})}),h.items?(0,t.jsx)(m.default,{data:h.items,onClose:()=>handleItems()}):null]})}},1030:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Members}});var t=a(2322),n=a(831),l=a(3444),r=a(3412),i=a(8039),d=a(7729),c=a.n(d),m=a(725),o=a(9934),u=a(9638),h=a(2784),x=a(5098),j=a(4661),p=a(1064),b=a(1999),f=a(7074),y=a(9143),N=a(6623),v=a(9133);function Members(){let e=(0,i.TL)(),s=(0,i.CG)(e=>e.member),a=(0,i.CG)(e=>e.auth);(0,h.useEffect)(()=>{(!s.expires||s.expires&&s.expires-Date.now()<0)&&e((0,p.Zw)())},[s.expires,e]);let handleInsert=()=>e((0,j.US)(!s.insert)),handleDelete=s=>e((0,j.Qu)(s)),handleEdit=s=>{e((0,j.mb)(s))},handleAccountHistory=s=>{s?e((0,N.lA)(s.id)):e((0,j.NL)(null))},d=(0,h.useCallback)(()=>{s.delete&&a.token&&e((0,p.EP)({id:s.delete.id,callback:()=>{handleDelete(null),(0,u.Qm)("Member deleted")}}))},[s.delete,a.token,e,handleDelete]);return(0,t.jsxs)(n.Z,{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"Member"}),(0,t.jsx)("meta",{name:"description",content:"Stock Management System"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:x.us.src})]}),(0,t.jsxs)("main",{children:[(0,t.jsxs)("div",{className:"framecontainer",children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)("div",{className:"framecontainer-content",children:(0,t.jsxs)("div",{className:"member",children:[(0,t.jsx)(l.Z,{name:"Members",showBars:!0}),s.delete?(0,t.jsx)(m.Z,{cancel:()=>handleDelete(null),confirm:d,message:"Are you sure you want to delete this item?",title:"Confirm Delete"}):null,s.insert&&a.token?(0,t.jsx)(f.default,{onClose:handleInsert}):null,s.edit&&a.token?(0,t.jsx)(y.default,{onClose:()=>handleEdit(null),data:s.edit}):null,s.salesHistory?(0,t.jsx)(v.default,{data:s.salesHistory,onClose:()=>handleAccountHistory(null)}):null,(0,t.jsx)(b.default,{data:s.data,handleDelete:handleDelete,handleEdit:handleEdit,handleInsert:handleInsert,handleAccountHistory:handleAccountHistory})]})})]}),s.loading?(0,t.jsx)(o.Z,{overlay:!0}):null]})]})}},7074:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return InsertMember}});var t=a(2322),n=a(566),l=a(9638),r=a(8039),i=a(1064),d=a(7613),c=a(590),m=a(725),o=a(570),u=a(1383),h=a(2784);function InsertMember(e){let{onClose:s}=e,a=(0,r.TL)(),[x,j]=(0,h.useState)(!1),{error:p,state:b,formKey:f,handleInput:y,handleSubmit:N,resetForm:v}=(0,n.Z)({schema:d.pN}),g=(0,h.useCallback)(()=>{j(e=>!e)},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{onClose:s,children:(0,t.jsxs)("div",{className:"member-insert",children:[(0,t.jsx)("h2",{className:"member-insert--heading",children:"Insert Member"}),(0,t.jsx)("div",{className:"member-insert--form",children:(0,t.jsxs)("div",{className:"member-insert--form",children:[(0,t.jsx)("h4",{className:"member-insert--heading",children:"Basic Information:"}),(0,t.jsx)(o.Z,{id:"fullName",isRequired:!0,label:"Fullname",placeholder:"eg. Naran Neu..",name:"fullName",onChange:y,defaultValue:b.fullName,error:p.fullName}),(0,t.jsx)(o.Z,{id:"address",isRequired:!0,label:"Address",placeholder:"eg. Kathmandu, Nepal..",name:"address",onChange:y,defaultValue:b.address,error:p.address}),(0,t.jsx)(o.Z,{id:"phone",isRequired:!0,label:"Phone",placeholder:"eg. 98XXXXXX..",name:"phone",onChange:y,defaultValue:b.phone,error:p.phone,instruction:"* Please note this number will be used to identify the member and cannot be changed afterwards."})]})},f),(0,t.jsx)("div",{className:"member-insert--actions",children:(0,t.jsx)(c.Z,{label:"Save",type:"primary",onClick:g,style:{minWidth:"13rem"}})})]})}),x?(0,t.jsx)(m.Z,{cancel:g,confirm:()=>{N(e=>{a((0,i.Di)({data:e,callback:()=>{g(),v(),(0,l.Qm)("Member inserted")}}))})},title:"Confirm Insert",message:"Are you sure you want to add this item to list?"}):null]})}},5957:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return SalesItemsTable}});var t=a(2322),n=a(6698),l=a(1383);let r=[{name:"title",display:"Title"},{name:"amount",display:"Amount"},{name:"quantity",display:"Quantity"},{name:"total",display:"Sub Total"}];function SalesItemsTable(e){let{data:s,onClose:a}=e;return(0,t.jsx)(l.Z,{onClose:a,children:(0,t.jsxs)("div",{className:"sales-insert",children:[(0,t.jsx)("h2",{className:"sales-insert--heading",children:"Sales Details"}),s.sales.member&&(0,t.jsx)("table",{className:"product-stock--grid",width:"30%",children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("td",{children:s.sales.member.fullName})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Address"}),(0,t.jsx)("td",{children:s.sales.member.address})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Phone"}),(0,t.jsx)("td",{children:s.sales.member.phone})]})]})}),(0,t.jsx)(n.Z,{disableControls:!0,headings:r,exportSchema:["title","quantity","amount","total"],rawData:s.items.map((e,s)=>({title:{value:e.title},amount:{value:e.amount},quantity:{value:e.quantity},total:{value:+e.quantity*+e.amount}}))}),(0,t.jsx)("table",{className:"product-stock--grid",width:"40%",children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Summery:"}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Sales ID"}),(0,t.jsx)("td",{children:s.sales.id})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Sales Date"}),(0,t.jsx)("td",{children:new Date(s.sales.date).toUTCString()})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Payment Method"}),(0,t.jsx)("td",{children:s.sales.type})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Sub Total"}),(0,t.jsxs)("td",{children:["Rs.",s.sales.amount]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Discount"}),(0,t.jsxs)("td",{children:["Rs.",s.sales.discount]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Total Amount"}),(0,t.jsxs)("td",{children:["Rs.",+s.sales.amount-+s.sales.discount]})]})]})}),s.sales.remark&&(0,t.jsxs)("p",{className:"sales-insert--panel__right-notice",children:["Remarks: ",s.sales.remark]})]})})}},7613:function(e,s,a){"use strict";a.d(s,{Nw:function(){return l},pN:function(){return r}});var t=a(195),n=a(3467);let l=t.z.object({id:(0,n.G5)("ID"),phone:(0,n.G5)("Phone",10,10),fullName:(0,n.G5)("FullName"),address:(0,n.G5)("Address"),inserted:(0,n.G5)("Inserted"),updated:(0,n.G5)("Updated")}),r=l.omit({id:!0,inserted:!0,updated:!0});l.pick({id:!0})}},function(e){e.O(0,[97,291,698,705,217,774,888,179],function(){return e(e.s=8003)}),_N_E=e.O()}]);