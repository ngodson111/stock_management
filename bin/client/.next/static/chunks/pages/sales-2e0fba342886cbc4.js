(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{4716:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sales",function(){return t(7394)}])},879:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SalesTable}});var a=t(5893),n=t(3401),l=t(7945);let r=[{name:"date",display:"Date"},{name:"type",display:"Payment Type"},{name:"amount",display:"Amount"},{name:"discount",display:"Discount"},{name:"member",display:"Member Details"},{name:"items",display:"Details"},{name:"entryDate",display:"Entry Date"}];function SalesTable(e){let{handleInsert:s,handleItems:t,data:i}=e;return(0,a.jsx)(n.Z,{customActions:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{label:(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"fa-regular fa-plus"})," Create Order"]}),type:"primary",style:{minWidth:"10rem"},onClick:s})}),headings:r,exportSchema:["date","type","amount","discount","member","remark","entryDate"],rawData:i.map((e,s)=>{var n,r,i;return{date:{value:new Date(e.date).toUTCString()},type:{value:e.type},amount:{value:"Rs."+e.amount},discount:{value:"Rs."+e.discount},items:{value:e.id,display:(0,a.jsx)(l.Z,{label:"View Items",type:"primary",onClick:()=>t(e)})},member:{value:null!==(r=null===(n=e.member)||void 0===n?void 0:n.fullName)&&void 0!==r?r:"N/A"},remark:{value:null!==(i=e.remark)&&void 0!==i?i:"N/A"},entryDate:{value:new Date(e.inserted).toUTCString()}}})})}},7394:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SalesPage}});var a=t(5893),n=t(5946),l=t(8352),r=t(2259),i=t(5506),d=t(9008),c=t.n(d),u=t(1091),m=t(7294),o=t(4841),h=t(5053),x=t(1163),j=t(879),y=t(7849),p=t(7965),f=t(9661);function SalesPage(){let e=(0,i.TL)(),s=(0,x.useRouter)(),t=(0,i.CG)(e=>e.sales),d=(0,i.CG)(e=>e.auth);(0,m.useEffect)(()=>{e((0,h.X8)()),s.query.sales&&handleInsert()},[e]);let handleInsert=()=>e((0,p.US)(!t.insert)),handleItems=s=>{s?e((0,h.iz)(s.id)):e((0,p.U7)(null))};return(0,a.jsxs)(n.Z,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Sales"}),(0,a.jsx)("meta",{name:"description",content:"Stock Management System"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:o.us.src})]}),(0,a.jsxs)("main",{children:[(0,a.jsxs)("div",{className:"framecontainer",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"framecontainer-content",children:(0,a.jsxs)("div",{className:"sales",children:[(0,a.jsx)(l.Z,{name:"Sales Report",showBars:!0}),t.insert&&d.token?(0,a.jsx)(y.default,{onClose:handleInsert}):null,t.items&&d.token?(0,a.jsx)(f.default,{data:t.items,onClose:()=>handleItems()}):null,(0,a.jsx)(j.default,{data:t.data,handleItems:handleItems,handleInsert:handleInsert})]})})]}),t.loading?(0,a.jsx)(u.Z,{overlay:!0}):null]})]})}},9661:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SalesItemsTable}});var a=t(5893),n=t(3401),l=t(9091);let r=[{name:"title",display:"Title"},{name:"amount",display:"Amount"},{name:"quantity",display:"Quantity"},{name:"total",display:"Sub Total"}];function SalesItemsTable(e){let{data:s,onClose:t}=e;return(0,a.jsx)(l.Z,{onClose:t,children:(0,a.jsxs)("div",{className:"sales-insert",children:[(0,a.jsx)("h2",{className:"sales-insert--heading",children:"Sales Details"}),s.sales.member&&(0,a.jsx)("table",{className:"product-stock--grid",width:"30%",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("td",{children:s.sales.member.fullName})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Address"}),(0,a.jsx)("td",{children:s.sales.member.address})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Phone"}),(0,a.jsx)("td",{children:s.sales.member.phone})]})]})}),(0,a.jsx)(n.Z,{disableControls:!0,headings:r,exportSchema:["title","quantity","amount","total"],rawData:s.items.map((e,s)=>({title:{value:e.title},amount:{value:e.amount},quantity:{value:e.quantity},total:{value:+e.quantity*+e.amount}}))}),(0,a.jsx)("table",{className:"product-stock--grid",width:"40%",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Summery:"}),(0,a.jsx)("td",{})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Sales ID"}),(0,a.jsx)("td",{children:s.sales.id})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Sales Date"}),(0,a.jsx)("td",{children:new Date(s.sales.date).toUTCString()})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Payment Method"}),(0,a.jsx)("td",{children:s.sales.type})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Sub Total"}),(0,a.jsxs)("td",{children:["Rs.",s.sales.amount]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Discount"}),(0,a.jsxs)("td",{children:["Rs.",s.sales.discount]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Total Amount"}),(0,a.jsxs)("td",{children:["Rs.",+s.sales.amount-+s.sales.discount]})]})]})}),s.sales.remark&&(0,a.jsxs)("p",{className:"sales-insert--panel__right-notice",children:["Remarks: ",s.sales.remark]})]})})}}},function(e){e.O(0,[664,458,345,401,78,301,849,774,888,179],function(){return e(e.s=4716)}),_N_E=e.O()}]);