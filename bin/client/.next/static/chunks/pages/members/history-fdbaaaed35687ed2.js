(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{2910:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members/history",function(){return t(9133)}])},9133:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SalesHistoryTable}});var l=t(2322),a=t(6698),n=t(2480),i=t(8039),r=t(6623),d=t(590),c=t(1383),u=t(5957);let o=[{name:"date",display:"Date"},{name:"type",display:"Payment Type"},{name:"amount",display:"Amount"},{name:"discount",display:"Discount"},{name:"member",display:"Member Details"},{name:"items",display:"Details"},{name:"entryDate",display:"Entry Date"}];function SalesHistoryTable(e){let{data:s,onClose:t}=e,h=(0,i.TL)(),m=(0,i.CG)(e=>e.sales),handleItems=e=>{e?h((0,r.iz)(e.id)):h((0,n.U7)(null))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{onClose:t,children:(0,l.jsxs)("div",{className:"sales-insert",children:[(0,l.jsx)("h2",{className:"sales-insert--heading",children:"Sales Details"}),(0,l.jsx)(a.Z,{headings:o,exportSchema:["date","type","amount","discount","member","remark","entryDate"],rawData:s.map((e,s)=>{var t,a,n;return{date:{value:new Date(e.date).toUTCString()},type:{value:e.type},amount:{value:"Rs."+e.amount},discount:{value:"Rs."+e.discount},items:{value:e.id,display:(0,l.jsx)(d.Z,{label:"View Items",type:"primary",onClick:()=>handleItems(e)})},member:{value:null!==(a=null===(t=e.member)||void 0===t?void 0:t.fullName)&&void 0!==a?a:"N/A"},remark:{value:null!==(n=e.remark)&&void 0!==n?n:"N/A"},entryDate:{value:new Date(e.inserted).toUTCString()}}})}),(0,l.jsx)("br",{}),(0,l.jsx)("table",{className:"product-stock--grid",width:"40%",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Summery:"}),(0,l.jsx)("td",{})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Total Transactions"}),(0,l.jsx)("td",{children:s.length})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Sub Total"}),(0,l.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+ +s.amount,0)]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Total Discount"}),(0,l.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+ +s.discount,0)]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Total Amount"}),(0,l.jsxs)("td",{children:["Rs.",s.reduce((e,s)=>e=+e+(+s.amount-+s.discount),0)]})]})]})})]})}),m.items?(0,l.jsx)(u.default,{data:m.items,onClose:()=>handleItems()}):null]})}},5957:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return SalesItemsTable}});var l=t(2322),a=t(6698),n=t(1383);let i=[{name:"title",display:"Title"},{name:"amount",display:"Amount"},{name:"quantity",display:"Quantity"},{name:"total",display:"Sub Total"}];function SalesItemsTable(e){let{data:s,onClose:t}=e;return(0,l.jsx)(n.Z,{onClose:t,children:(0,l.jsxs)("div",{className:"sales-insert",children:[(0,l.jsx)("h2",{className:"sales-insert--heading",children:"Sales Details"}),s.sales.member&&(0,l.jsx)("table",{className:"product-stock--grid",width:"30%",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("td",{children:s.sales.member.fullName})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Address"}),(0,l.jsx)("td",{children:s.sales.member.address})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Phone"}),(0,l.jsx)("td",{children:s.sales.member.phone})]})]})}),(0,l.jsx)(a.Z,{disableControls:!0,headings:i,exportSchema:["title","quantity","amount","total"],rawData:s.items.map((e,s)=>({title:{value:e.title},amount:{value:e.amount},quantity:{value:e.quantity},total:{value:+e.quantity*+e.amount}}))}),(0,l.jsx)("table",{className:"product-stock--grid",width:"40%",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Summery:"}),(0,l.jsx)("td",{})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Sales ID"}),(0,l.jsx)("td",{children:s.sales.id})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Sales Date"}),(0,l.jsx)("td",{children:new Date(s.sales.date).toUTCString()})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Payment Method"}),(0,l.jsx)("td",{children:s.sales.type})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Sub Total"}),(0,l.jsxs)("td",{children:["Rs.",s.sales.amount]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Discount"}),(0,l.jsxs)("td",{children:["Rs.",s.sales.discount]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Total Amount"}),(0,l.jsxs)("td",{children:["Rs.",+s.sales.amount-+s.sales.discount]})]})]})}),s.sales.remark&&(0,l.jsxs)("p",{className:"sales-insert--panel__right-notice",children:["Remarks: ",s.sales.remark]})]})})}},1383:function(e,s,t){"use strict";t.d(s,{Z:function(){return UIModal}});var l=t(2322),a=t(2784);function UIModal(e){let{children:s,onClose:t,style:n,showAnimation:i}=e,r=(0,a.useRef)(null);return(0,l.jsxs)("div",{className:"uimodal",children:[(0,l.jsx)("div",{className:"uimodal-overlay"}),(0,l.jsxs)("div",{className:"uimodal-content",style:n,ref:r,children:[(0,l.jsx)("div",{className:"uimodal-content--cross",onClick:()=>{var e;if(!i)return null==t?void 0:t();null===(e=r.current)||void 0===e||e.classList.add("hide"),setTimeout(()=>null==t?void 0:t(),700)},children:(0,l.jsx)("i",{className:"fa-regular fa-times"})}),s]})]})}}},function(e){e.O(0,[97,698,774,888,179],function(){return e(e.s=2910)}),_N_E=e.O()}]);